diff -urN commoncpp2-1.5.1.org/configure.ac commoncpp2-1.5.1/configure.ac
--- commoncpp2-1.5.1.org/configure.ac	2006-10-07 20:14:28.000000000 +0200
+++ commoncpp2-1.5.1/configure.ac	2006-11-10 11:48:05.995177250 +0100
@@ -354,6 +354,9 @@
 darwin*)
 	MODULE_FLAGS="-dynamic -bundle -undefined suppress -flat_namespace -read_only_relocs suppress"
 	;;
+linux*)
+	BASE_LIB="$SSL_LIBS"
+	;;
 esac
 
 AC_SUBST(COMMON_FLAGS)
diff -urN commoncpp2-1.5.1.org/Makefile.am commoncpp2-1.5.1/Makefile.am
--- commoncpp2-1.5.1.org/Makefile.am	2006-05-03 14:31:58.000000000 +0200
+++ commoncpp2-1.5.1/Makefile.am	2006-11-10 11:51:07.890545000 +0100
@@ -21,12 +21,8 @@
 if WIN32
 SUBDIRS = include src doc
 else
-if MSWIN32
-SUBDIRS = include w32 doc
-else
 SUBDIRS = include src doc
 endif
-endif
 
 macosx:
 	(cd src ; make macosx)
@@ -34,23 +30,4 @@
 darwin:
 	(cd src ; make macosx)
 
-install-data-local:
-	@if test -f /etc/ld.so.conf \
-	  -a `echo $(libdir) | grep ^/usr`XXX != "XXX" ; then \
-		if ! grep -q "$(libdir)" /etc/ld.so.conf; then \
-			echo "------------------------------------------------------------------------------" ;\
-			echo "Hmm, looks like you forgot to add $(libdir) to /etc/ld.so.conf." ;\
-			echo "I'll try to fix it for you (but pay attention to libtool's output" ;\
-			echo "next time, ok?)" ;\
-			echo "$(libdir)" >> /etc/ld.so.conf && \
-				echo "Ok, all fixed." \
-				|| \
-				(echo "" ;\
-				echo "Well, that didn't work.  Remember to add $(libdir) to" ;\
-				echo "/etc/ld.so.conf if you want to use this library.") ;\
-			echo "------------------------------------------------------------------------------" ;\
-			ldconfig ;\
-		fi ;\
-	fi
-
 
diff -urN commoncpp2-1.5.1.org/src/Makefile.am commoncpp2-1.5.1/src/Makefile.am
--- commoncpp2-1.5.1.org/src/Makefile.am	2006-09-30 18:41:53.000000000 +0200
+++ commoncpp2-1.5.1/src/Makefile.am	2006-11-10 12:11:29.986921250 +0100
@@ -32,8 +32,8 @@
 scriptdir = $(bindir)
 script_DATA = ccgnu2-config
 
-libccgnu2_la_LIBADD = @THREAD_LIBS@
-libccgnu2_la_LDFLAGS = $(RELEASE) $(SHARED_FLAGS)
+libccgnu2_la_LIBADD = @THREAD_LIBS@ -lpthread -ldl
+libccgnu2_la_LDFLAGS = $(RELEASE) $(SHARED_FLAGS) -lpthread
 noinst_DATA = @STAGE2@
 
 libccgnu2_la_SOURCES = thread.cpp mutex.cpp semaphore.cpp threadkey.cpp \
@@ -45,7 +45,7 @@
 	cidr.cpp private.h nat.h
 
 if EXTRAS
-libccext2_la_LIBADD = @BASE_LIB@ @THREAD_LIBS@
+libccext2_la_LIBADD = @BASE_LIB@ @THREAD_LIBS@ libccgnu2.la
 libccext2_la_LDFLAGS = $(RELEASE) $(SHARED_FLAGS)
 
 if GETOPT_LONG
@@ -64,6 +64,11 @@
 	tokenizer.cpp mime.cpp ssl.cpp
 
 endif
+
+else
+
+libccext2_la_LIBADD = libccgnu2.la
+
 endif
 
 # private.h and nat.h are internal headers
